{"remainingRequest":"/home/ckg/A毕设/exam-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ckg/A毕设/exam-vue/src/components/admin/BasicInformation.vue?vue&type=style&index=0&id=5eba53e4&scoped=true&lang=scss&","dependencies":[{"path":"/home/ckg/A毕设/exam-vue/src/components/admin/BasicInformation.vue","mtime":1649949779811},{"path":"/home/ckg/A毕设/exam-vue/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICIuLi8uLi9hc3NldHMvY3NzL2FkbWluL3VzZXJNYW5hZ2UiOwo="},{"version":3,"sources":["BasicInformation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsgBA","file":"BasicInformation.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n  <el-row :gutter=\"20\">\n    <el-col :span=\"18\" :xs=\"20\">\n      <el-card class=\"box-card\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>用户信息</span>\n        </div>\n        <el-container>\n          <el-header>\n            <el-input v-model=\"queryInfo.user_account\" @blur=\"getSomeUser\" placeholder=\"搜索账号\"\n                      prefix-icon=\"el-icon-search\"></el-input>\n            <el-button type=\"primary\" style=\"margin-left: 5px\" icon=\"el-icon-plus\" @click=\" getSomeUser()\">搜索</el-button>\n            <el-button type=\"primary\" style=\"margin-left: 5px\"  @click=\"showAddDialog\">添加用户</el-button>\n          </el-header>\n          <el-main>\n            <el-table\n              ref=\"multipleTable\"\n              highlight-current-row\n              v-loading=\"loading\"\n              :border=\"true\"\n              :data=\"userInfo\"\n              tooltip-effect=\"dark\"\n              style=\"width: 100%\"\n              @selection-change=\"handleSelectionChange\">\n              <el-table-column align=\"center\" label=\"账号\">\n                <template slot-scope=\"scope\">\n                  {{ scope.row.user_account }}\n                </template>\n              </el-table-column>\n              <el-table-column align=\"center\" label=\"姓名\">\n                <template slot-scope=\"scope\">\n                  {{ scope.row.sname }}\n                </template>\n              </el-table-column>\n              <el-table-column align=\"center\" label=\"操作\">\n                <template slot-scope=\"scope\">\n                  <el-button round size=\"small\" type=\"primary\" icon=\"el-icon-info\"\n                             @click=\"findUserDetail(scope.row.user_account)\">查看详情\n                  </el-button>\n\n                </template>\n              </el-table-column>\n            </el-table>\n            <el-pagination style=\"margin-top: 25px\"\n                           @size-change=\"handleSizeChange\"\n                           @current-change=\"handleCurrentChange\"\n                           :current-page=\"queryInfo.index\"\n                           :page-sizes=\"[10, 20, 30, 50]\"\n                           :page-size=\"queryInfo.perPage\"\n                           layout=\"total, sizes, prev, pager, next, jumper\"\n                           :total=\"total\">\n            </el-pagination>\n\n          </el-main>\n          <el-dialog title=\"添加用户\" :visible.sync=\"addTableVisible\" width=\"50%\"\n                     center>\n            <el-container>\n              <el-main>\n                <div>\n                    <el-form ref=\"elForm\" :model=\"formData1\" :rules=\"rules\" size=\"medium\" label-width=\"100px\">\n                      <el-form-item label=\"账号\" prop=\"user_account\">\n                        <el-input v-model=\"formData1.user_account\" placeholder=\"请输入账号\" clearable :style=\"{width: '100%'}\">\n                        </el-input>\n                      </el-form-item>\n                      <el-form-item label=\"密码\" prop=\"user_pwd\">\n                        <el-input v-model=\"formData1.user_pwd\" placeholder=\"请输入密码\" clearable :style=\"{width: '100%'}\">\n                        </el-input>\n                      </el-form-item>\n                      <el-form-item label=\"邮箱\" prop=\"email\">\n                        <el-input v-model=\"formData1.email\" placeholder=\"请输入邮箱\" clearable :style=\"{width: '100%'}\">\n                        </el-input>\n                      </el-form-item>\n                      <el-form-item label=\"手机号码\" prop=\"phone\">\n                        <el-input v-model=\"formData1.phone\" placeholder=\"请输入手机号码\" clearable :style=\"{width: '100%'}\">\n                        </el-input>\n                      </el-form-item>\n                    </el-form>\n                    <div slot=\"footer\">\n                      <el-button @click=\"close\">取消</el-button>\n                      <el-button type=\"primary\" @click=\"handleConfirm\">确定</el-button>\n                    </div>\n                </div>\n              </el-main>\n            </el-container>\n          </el-dialog>\n\n          <el-dialog title=\"好友申请\" :visible.sync=\"addVisible\" width=\"50%\"\n                     center>\n            <el-container>\n              <el-header height=\"220\">\n                <div>\n                  向我发起的好友申请\n                </div>\n              </el-header>\n              <el-main>\n                <el-table\n                  ref=\"questionTable\"\n                  highlight-current-row\n                  v-loading=\"loading\"\n                  :border=\"true\"\n                  :data=\"requestFriendInfo\"\n                  tooltip-effect=\"dark\"\n                  style=\"width: 100%;\">\n                  <el-table-column align=\"center\" label=\"申请我为好友的用户账号\">\n                    <template slot-scope=\"scope\">\n                      {{ scope.row.account }}\n                    </template>\n                  </el-table-column>\n                  <el-table-column align=\"center\" label=\"申请我为好友的理由\">\n                    <template slot-scope=\"scope\">\n                      {{ scope.row.detail }}\n                    </template>\n                  </el-table-column>\n                  <el-table-column align=\"center\" label=\"操作\">\n                    <template slot-scope=\"scope\">\n                      <el-button round size=\"small\" type=\"primary\" icon=\"el-icon-info\"\n                                 @click=\"agree(scope.row.account)\">同意\n                      </el-button>\n                      <el-button round size=\"small\" type=\"danger\" icon=\"el-icon-error\" @click=\"refuse(scope.row.account)\">拒绝\n                      </el-button>\n                    </template>\n                  </el-table-column>\n                </el-table>\n              </el-main>\n            </el-container>\n          </el-dialog>\n          <el-dialog title=\"用户详细信息\" :visible.sync=\"Visible\" width=\"50%\"\n                     center>\n            <el-container>\n              <el-main>\n                <el-form ref=\"elForm\" :model=\"formData\" :rules=\"rules\" size=\"medium\" label-width=\"100px\">\n                  <el-form-item label=\"专业\" prop=\"major\">\n                    <el-input v-model=\"formData.major\" placeholder=\"该用户未填写\" readonly clearable :style=\"{width: '100%'}\"></el-input>\n                  </el-form-item>\n                  <el-form-item label=\"邮箱\" prop=\"email\">\n                    <el-input v-model=\"formData.email\" placeholder=\"该用户未填写\" readonly clearable :style=\"{width: '100%'}\"></el-input>\n                  </el-form-item>\n                  <el-form-item label=\"手机号码\" prop=\"phone\">\n                    <el-input v-model=\"formData.phone\"  placeholder=\"该用户未填写\" readonly clearable :style=\"{width: '100%'}\">\n                    </el-input>\n                  </el-form-item>\n                  <el-form-item label=\"学校\" prop=\"collage\">\n                    <el-input v-model=\"formData.collage\" placeholder=\"该用户未填写\"  readonly clearable :style=\"{width: '100%'}\">\n                    </el-input>\n                  </el-form-item>\n                  <el-form-item label=\"个性签名\" prop=\"detail\">\n                    <el-input v-model=\"formData.detail\"  placeholder=\"该用户未填写\" readonly clearable :style=\"{width: '100%'}\">\n                    </el-input>\n                  </el-form-item>\n                  <el-form-item label=\"生日\" prop=\"birth\">\n                    <el-date-picker v-model=\"formData.birth\" format=\"yyyy-MM-dd\" value-format=\"yyyy-MM-dd\" placeholder=\"该用户未填写\"\n                                    :style=\"{width: '100%'}\"readonly clearable></el-date-picker>\n                  </el-form-item>\n\n                </el-form>\n              </el-main>\n            </el-container>\n          </el-dialog>\n          <el-dialog title=\"申请信息\" :visible.sync=\"add\" width=\"50%\"\n                     center>\n            <el-container>\n              <el-header height=\"220\">\n                <div>\n                  请输入申请理由\n                </div>\n              </el-header>\n              <el-main>\n                <div class=\"text\">\n                  <el-input\n                    v-model=\"form.message\" @keyup.native.enter=\"send\"\n                    type=\"textarea\" :rows=\"5\" placeholder=\"请输入申请理由\">\n                  </el-input>\n                  <div class=\"btn\">\n                    <el-button @click=\"send(form.message)\" size=\"mini\" icon=\"el-icon-position\" type=\"success\">发送</el-button>\n                  </div>\n                </div>\n\n              </el-main>\n            </el-container>\n          </el-dialog>\n        </el-container>\n      </el-card>\n    </el-col>\n  </el-row>\n\n</template>\n\n<script>\n    import exam from \"../../api/exam\";\n    import auth from \"../../api/auth\";\n\n\n    const   firstInfo = {\n        'index': 1,\n        'perPage': 10\n    };\n    const  requestFriend={\n        'flag':0\n    };\n    const  friendAsk={\n        'flag':1\n    };\n    const  FriendRequest = {\n        account1:'',\n        account2:'',\n        detail:'',\n        addStatus:''\n    };\n    const  detailUser={\n        account:''\n    }\n    export default {\n        name: 'BasicInformation',\n        data () {\n            return {\n                queryInfo: {\n                    'user_account': '',\n                    'index': 1,\n                    'perPage': 10\n                },\n                userInfo: [],\n                requestFriendInfo:[],\n                total: 0,\n                loading: true,\n                addTableVisible: false,\n                addVisible: false,\n                Visible: false,\n                add: false,\n                formData:{\n                    'phone':'',\n                    'email':'',\n                    'collage':'',\n                    'major':'',\n                    'birth':'',\n                    'detail':''\n                },\n                myAllFriends:[],\n                form: {message: ''},\n                formData1: {\n                    user_account: undefined,\n                    user_pwd: undefined,\n                    auth:true,\n                    email: undefined,\n                    phone: undefined,\n                },\n                rules: {\n                    user_account: [{\n                        required: true,\n                        message: '请输入账号',\n                        trigger: 'blur'\n                    }],\n                    user_pwd: [{\n                        required: true,\n                        message: '请输入密码',\n                        trigger: 'blur'\n                    }],\n                    email: [{\n                        required: true,\n                        message: '请输入邮箱',\n                        trigger: 'blur'\n                    }],\n                    phone: [{\n                        required: true,\n                        message: '请输入手机号码',\n                        trigger: 'blur'\n                    }],\n                },\n            }\n        },\n        created () {\n            this.getUserInfo()\n            this.initMyAllFriends()\n        },\n        methods: {\n            //获取用户信息\n            getUserInfo () {\n                firstInfo.index=this.queryInfo.index\n                firstInfo.perPage=this.queryInfo.perPage\n                exam.findAll(firstInfo).then((resp) => {\n                    console.log(resp.data.code)\n                    if (resp.data.code === 666) {\n                        this.userInfo = resp.data.obj\n                        this.total = resp.data.totalSize\n                        this.loading = false\n                    } else {\n                        this.$notify({\n                            title: 'Tips',\n                            message: '获取所有用户信息失败',\n                            type: 'error',\n                            duration: 2000\n                        })\n                    }\n                })\n            },\n            getSomeUser(){\n                exam.findUsersByAccount(this.queryInfo).then((resp) => {\n                    console.log(resp.data.code)\n                    if (resp.data.code === 666) {\n                        this.userInfo = resp.data.obj\n                        this.total = resp.data.totalSize\n                        this.loading = false\n                    } else {\n                        this.$notify({\n                            title: 'Tips',\n                            message: '获取指定用户信息失败',\n                            type: 'error',\n                            duration: 2000\n                        })\n                    }\n                })\n            },\n            findUserDetail(account){\n                detailUser.account=account\n                exam.showInfo(detailUser).then((resp) => {\n                    console.log('==========='+resp.data.code)\n                    if (resp.data.code === 666) {\n                        this.formData = resp.data.obj\n                    } else {\n                        this.$notify({\n                            title: 'Tips',\n                            message: '获取某用户信息失败',\n                            type: 'error',\n                            duration: 2000\n                        })\n                    }\n                })\n                this.Visible = true\n            },\n            updateFriendRequest(user_account){\n                this.$notify({\n                    title: 'Tips',\n                    message: '改变好友信息成功',\n                    type: 'success',\n                    duration: 2000\n                })\n\n            },\n            //表格某一行被选中\n            handleSelectionChange (val) {\n                this.selectedInTable = val\n            },\n\n            //分页插件的大小改变\n            handleSizeChange (val) {\n                this.queryInfo.perPage = val\n                this.getUserInfo()\n            },\n            //分页插件的页数\n            handleCurrentChange (val) {\n                this.queryInfo.index = val\n                this.getUserInfo()\n            },\n            //点击添加按钮\n            showAddDialog () {\n                this.addTableVisible = true\n            },\n            showFriendDialog () {\n                exam.getRequest(friendAsk).then((resp) => {\n                    console.log(resp.data.code)\n                    if (resp.data.code === 666) {\n                        this.requestFriendInfo = resp.data.obj\n                        this.total = resp.data.totalSize\n                    } else {\n                        this.$notify({\n                            title: 'Tips',\n                            message: '获取向我发送申请好友信息失败',\n                            type: 'error',\n                            duration: 2000\n                        })\n                    }\n                })\n\n                this.addVisible = true\n            },\n            agree(user_account){\n                console.log(\"==================\")\n                console.log(user_account)\n                console.log(\"==================\")\n\n                FriendRequest.account1=user_account\n                FriendRequest.detail=''\n                FriendRequest.addStatus= 1\n                exam.updateFriendRel(FriendRequest).then(response => {\n                    console.log(\"xxxxxxxxxxxxxxx\"+response.data.code)\n                    if (response.data.code === 666) {\n                        this.$message({\n                            type: 'success',\n                            message: '多个朋友,多条路!',\n                            duration: 1000\n                        });\n                    } else {\n                        this.$message({\n                            message: '添加失败!',\n                            type: 'warning'\n                        });\n                        return false;\n                    }\n                });\n            },\n            refuse(user_account){\n                FriendRequest.account1=user_account\n                FriendRequest.detail=''\n                FriendRequest.addStatus= 2\n                exam.updateFriendRel(FriendRequest).then(response => {\n                    console.log(\"xxxxxxxxxxxxxxx\"+response.data.code)\n                    if (response.data.code === 666) {\n                        this.$message({\n                            type: 'success',\n                            message: '丢个朋友,丢条路!',\n                            duration: 1000\n                        });\n                    } else {\n                        this.$message({\n                            message: '拒绝失败!',\n                            type: 'warning'\n                        });\n                        return false;\n                    }\n                });\n\n\n\n\n            },\n            initMyAllFriends(){\n                exam.getAllFriends().then((resp) => {\n                    if (resp.data.code === 666) {\n                        this.myAllFriends = resp.data.obj\n                    } else {\n                        this.$notify({\n                            title: 'Tips',\n                            message: '获取某用户信息失败',\n                            type: 'error',\n                            duration: 2000\n                        })\n                    }\n                })\n            },\n            addRequest(user_account){\n                FriendRequest.account2=user_account\n                this.add = true\n            },\n            send(message){\n                FriendRequest.detail=message\n                FriendRequest.addStatus=0\n                exam.addRequest(FriendRequest).then((resp) => {\n                    console.log(resp.data.code)\n                    if (resp.data.code === 666) {\n                        this.$notify({\n                            title: 'Tips',\n                            message: resp.data.message,\n                            type: 'success',\n                            duration: 2000\n                        })\n                    } else {\n                        this.$notify({\n                            title: 'Tips',\n                            message: resp.data.message,\n                            type: 'error',\n                            duration: 2000\n                        })\n                    }\n                })\n\n            },\n            onOpen() {},\n            onClose() {\n                this.$refs['elForm'].resetFields()\n            },\n            close() {\n                this.$emit('update:visible', false)\n            },\n            handleConfirm() {\n                    auth.register(this.formData1).then(resp => {\n                        switch(resp.data.code)\n                        {\n                            case 500:\n                                this.$message({\n                                    type: 'error',\n                                    message:resp.data.message,\n                                    duration: 1000\n                                });\n                                break;\n                            case 666:\n                                Vue.prototype.$notify({\n                                    title: 'Tips',\n                                    message: resp.data.message,\n                                    type: 'success',\n                                    duration: 2000\n                                })\n                                break;\n\n                        }\n                    })\n                },\n\n            deleteFriend(user_account) {\n\n\n            },\n        },\n        computed: {\n            isOrNotPassExam (user_account) {\n                return (user_account) => {\n                    let flag = false\n                    this.myAllFriends.forEach(item => {\n                        if (item.user_account === user_account) {\n                            flag = true\n                        }\n                    })\n                    return flag\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n  @import \"../../assets/css/admin/userManage\";\n</style>\n"]}]}