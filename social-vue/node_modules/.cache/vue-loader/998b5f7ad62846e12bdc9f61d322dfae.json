{"remainingRequest":"/home/ckg/A毕设/exam-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ckg/A毕设/exam-vue/src/components/chat/toolbar.vue?vue&type=style&index=1&lang=scss&","dependencies":[{"path":"/home/ckg/A毕设/exam-vue/src/components/chat/toolbar.vue","mtime":1639584032000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi8qIGVsLXBvcG92ZXLmmK/lkoxhcHDlkIznuqfnmoTvvIzmiYDku6VzY29wZWTnmoTlsYDpg6jlsZ7mgKforr7nva7kuobml6DmlYggKi8KLyog6ZyA6KaB6K6+572u5YWo5bGAc3R5bGUgKi8KLmVsLXBvcG92ZXIubW9yZUxpc3RQb3BvdmVyQ2xhc3N7CiAgaGVpZ2h0OjE1MHB4OwogIHdpZHRoOjE1MHB4OwogLy8gbWFyZ2luOiAwcHg7CiAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgcGFkZGluZzogMHB4OwogIG92ZXJmbG93LXg6IGhpZGRlbjsKICBvdmVyZmxvdy15OiBoaWRkZW47CiAgYmFja2dyb3VuZC1jb2xvcjojMmUzMjM4OwogIGJvcmRlcjpub25lOwp9Cg=="},{"version":3,"sources":["toolbar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"toolbar.vue","sourceRoot":"src/components/chat","sourcesContent":["<template>\n  <div id=\"toolbar\">\n    <el-image class=\"imgProfile\"\n              :src=\"user.userProfile\"\n              :preview-src-list=\"[user.userProfile]\"\n              :alt=\"user.nickname\">\n      <div slot=\"error\" class=\"image-slot\">\n        <i class=\"el-icon-picture-outline\"></i>\n      </div>\n    </el-image>\n    <div id=\"btnBar\">\n      <div class=\"topBtnBar\">\n        <el-tooltip  class=\"item\" effect=\"dark\" content=\"进入群聊\" placement=\"right\">\n        <el-button @click=\"chooseChatList('群聊')\" class=\"toolBtn\" size=\"small\"><i class=\"fa fa-comments fa-2x\" aria-hidden=\"true\"></i></el-button>\n        </el-tooltip>\n        <el-tooltip class=\"item\" effect=\"dark\" content=\"用户列表\" placement=\"right\">\n        <el-button @click=\"chooseChatList('私聊')\" class=\"toolBtn\" size=\"small\"><i class=\"fa fa-address-book-o fa-2x\" aria-hidden=\"true\"></i></el-button>\n        </el-tooltip>\n        <el-tooltip class=\"item\" effect=\"dark\" content=\"与机器人聊天\" placement=\"right\">\n          <el-button @click=\"chooseChatList('机器人')\" class=\"toolBtn\" size=\"small\"><i class=\"fa fa-android fa-2x\" aria-hidden=\"true\"></i></el-button>\n        </el-tooltip>\n      </div>\n      <div class=\"bottomBtnBar\">\n        <el-tooltip class=\"item\" effect=\"dark\" content=\"个人中心\" placement=\"right\">\n          <el-button class=\"toolBtn\" size=\"small\"><i class=\"fa fa-user fa-2x\" aria-hidden=\"true\"></i></el-button>\n        </el-tooltip>\n        <el-tooltip class=\"item\" effect=\"dark\" content=\"更多\" placement=\"right\">\n          <el-popover\n                  placement=\"right\"\n                  width=\"180\"\n                  trigger=\"click\"\n                  popper-class=\"moreListPopoverClass\"\n                   >\n            <ul id=\"moreList\">\n              <li @click=\"showFeedbackDialog\" >意见反馈</li>\n              <li>举报</li>\n              <li @click=\"clearChatHistory\">清空聊天记录</li>\n            </ul>\n            <el-button slot=\"reference\" class=\"toolBtn\" size=\"small\"><i class=\"fa fa-bars fa-2x\" aria-hidden=\"true\"></i></el-button>\n          </el-popover>\n        </el-tooltip>\n        <el-tooltip class=\"item\" effect=\"dark\" content=\"退出\" placement=\"right\">\n        <el-button @click=\"exitSystem\" class=\"toolBtn\" size=\"small\"><i class=\"fa fa-sign-out fa-2x\" aria-hidden=\"true\"></i></el-button>\n        </el-tooltip>\n      </div>\n    </div>\n    <el-dialog title=\"意见反馈\" :visible.sync=\"feedBackDialogVisible\" class=\"feedbackDialog\">\n      <textarea class=\"feedbackInput\" v-model=\"feedBackContent\">\n\n      </textarea>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"handleFeedbackSend\">确 定</el-button>\n        <el-button @click=\"feedBackDialogVisible = false\">取 消</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"toolbar\",\n    data(){\n      return{\n        user:JSON.parse(window.sessionStorage.getItem('user')),\n        feedBackDialogVisible:false,\n        feedBackContent:'',\n      }\n    },\n    methods:{\n      //退出系统\n      exitSystem(){\n        this.$confirm('你是否要退出系统吗?', '系统提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.getRequest(\"/logout\");\n          sessionStorage.removeItem(\"user\");\n          //清除SessionStorage中保存的state\n          if (sessionStorage.getItem(\"state\")){\n            sessionStorage.removeItem(\"state\");\n          }\n          //关闭连接\n          this.$store.dispatch(\"disconnect\");\n          this.$router.replace(\"/\");\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消操作'\n          });\n        });\n      },\n      //选择聊天列表\n      chooseChatList(listName){\n        this.$store.commit(\"changeCurrentList\",listName);\n      },\n      //打开意见反馈对话框\n      showFeedbackDialog(){\n        this.feedBackContent='';\n        this.feedBackDialogVisible=true;\n      },\n      //处理反馈消息邮件发送\n      handleFeedbackSend(){\n        let msgObj={};\n        msgObj.userId=this.user.id;\n        msgObj.nickname=this.user.nickname;\n        msgObj.username=this.user.username;\n        msgObj.content=this.feedBackContent;\n        console.log(msgObj)\n        this.postRequest(\"/mail/feedback\",msgObj).then(resp=>{\n          if (resp) {\n            this.feedBackDialogVisible = false;\n          }\n        })\n      },\n      //清空聊天记录\n      clearChatHistory(){\n        this.$confirm('此操作将永久删除本地聊天记录(群聊记录会在下次登录时恢复), 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          //清除本地的localStorage中的聊天记录\n          if (localStorage.getItem(\"chat-session\")){\n            localStorage.removeItem(\"chat-session\");\n          }\n          //清除Vuex中保存的记录\n          this.$store.state.sessionStorage={};\n          //清除SessionStorage中保存的state\n          if (sessionStorage.getItem(\"state\")){\n            sessionStorage.removeItem(\"state\");\n          }\n          this.$message({\n            type: 'success',\n            message: '删除成功'\n          });\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n        });\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  #toolbar{\n    width: 100%;\n    height: 100%;\n    #btnBar{\n      width: 100%;\n      height: 82%;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n    }\n    .imgProfile{\n      width: 40px;\n      height: 40px;\n      horiz-align: center;\n      margin: 25px 10px;\n    }\n    .toolBtn{\n      background-color: #2e3238;\n      border: 0;\n      margin: 5px 5px;\n    }\n    .feedbackDialog{\n      width: 1000px;\n      height: 800px;\n      margin: 10px auto;\n      //background-color: #ECEAE8;\n    }\n    .feedbackInput{\n      width: 450px;\n      height: 200px;\n      resize: none;\n      padding: 0;\n      margin: 0;\n    }\n  }\n\n\n  #moreList{\n    margin: 0px;\n    padding: 0px;\n    background-color: #2e3238;\n    li {\n      padding-top: 14px;\n      padding-bottom: 14px;\n      padding-left: 5px;\n      //padding-right: 40px;\n      //border-bottom: 1px solid #292C33;\n      list-style: none;\n      cursor: pointer;\n      &:hover {\n        background-color: #abaaaa;\n      }\n    }\n  }\n\n</style>\n<style lang=\"scss\">\n  /* el-popover是和app同级的，所以scoped的局部属性设置了无效 */\n  /* 需要设置全局style */\n  .el-popover.moreListPopoverClass{\n    height:150px;\n    width:150px;\n   // margin: 0px;\n    margin-left: 10px;\n    padding: 0px;\n    overflow-x: hidden;\n    overflow-y: hidden;\n    background-color:#2e3238;\n    border:none;\n  }\n</style>\n"]}]}