{"remainingRequest":"/home/ckg/A毕设/exam-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ckg/A毕设/exam-vue/src/components/chat/usertext.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/home/ckg/A毕设/exam-vue/src/components/chat/usertext.vue","mtime":1649606312647},{"path":"/home/ckg/A毕设/exam-vue/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/A毕设/exam-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi8qIGVsLXBvcG92ZXLmmK/lkoxhcHDlkIznuqfnmoTvvIzmiYDku6VzY29wZWTnmoTlsYDpg6jlsZ7mgKforr7nva7ml6DmlYggKi8KLyog6ZyA6KaB6K6+572u5YWo5bGAc3R5bGUgKi8KLmVsLXBvcG92ZXJ7CiAgaGVpZ2h0OjIwMHB4OwogIHdpZHRoOjQ1MHB4OwogIG92ZXJmbG93OiBzY3JvbGw7CiAgb3ZlcmZsb3cteDphdXRvOwp9Cg=="},{"version":3,"sources":["usertext.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"usertext.vue","sourceRoot":"src/components/chat","sourcesContent":["<template>\n  <div id=\"uesrtext\">\n    <div>\n<!--      <el-popover placement=\"top-start\" width=\"400\" trigger=\"click\" class=\"emoBox\">-->\n<!--        <div class=\"emotionList\">-->\n<!--          <a href=\"javascript:void(0);\" @click=\"getEmo(index)\" v-for=\"(item,index) in faceList\" :key=\"index\" class=\"emotionItem\">{{item}}</a>-->\n<!--        </div>-->\n<!--        <el-button id=\"emojiBtn\" class=\"emotionSelect\" slot=\"reference\">-->\n<!--          <i class=\"fa fa-smile-o\" aria-hidden=\"true\"></i>-->\n<!--        </el-button>-->\n<!--      </el-popover>-->\n<!--    <el-upload-->\n<!--            class=\"upload-btn\"-->\n<!--            action=\"/ossFileUpload?module=group-chat\"-->\n<!--            :before-upload=\"beforeAvatarUpload\"-->\n<!--            :on-success=\"imgSuccess\"-->\n<!--            :on-error=\"imgError\"-->\n<!--            :show-file-list=\"false\"-->\n<!--            accept=\".jpg,.jpeg,.png,.JPG,JPEG,.PNG,.gif,.GIF\"-->\n<!--            >-->\n<!--      <el-button id=\"uploadImgBtn\" icon=\"el-icon-picture-outline\"></el-button>-->\n<!--    </el-upload>-->\n    </div>\n    <textarea id=\"textarea\" placeholder=\"按 Ctrl + Enter 发送\" v-model=\"content\" v-on:keyup=\"addMessage\">\n    </textarea>\n    <el-button id=\"sendBtn\" type=\"primary\" size=\"mini\" @click=\"addMessageByClick\" >发送(S)</el-button>\n  </div>\n</template>\n\n<script>\nimport {mapState} from 'vuex';\n\nexport default {\n  name: 'uesrtext',\n  data () {\n    return {\n      faceList:[],//表情包数据\n      content:''\n    }\n  },\n  mounted(){\n\n  },\n  computed:mapState([\n    'sessions',\n    'currentSession'\n  ]),\n  methods: {\n    addMessageByClick(){\n      if(!this.content || this.content.match(/^[ ]*$/)) {\n        this.$message({\n          showClose: true,\n          message: '不能发送空白信息'\n        });\n        return;\n      }\n      let msgObj=new Object();\n      msgObj.content=this.content;\n      msgObj.messageTypeId=1;\n      //发送群聊消息\n      if (this.currentSession.username==\"群聊\"){\n        console.log(this.content);\n        this.$store.state.stomp.send(\"/ws/groupChat\",{},JSON.stringify(msgObj));\n      }\n      //给机器人发送消息\n      if (this.currentSession.username==\"机器人\"){\n        msgObj.fromNickname=this.$store.state.currentUser.nickname;\n        msgObj.to='机器人';\n        this.$store.state.stomp.send(\"/ws/robotChat\",{},JSON.stringify(msgObj));\n        //保存该条记录到session\n        this.$store.commit('addMessage',msgObj);\n      }\n      //发送私聊消息\n      else{\n        msgObj.from=this.$store.state.currentUser.username;\n        msgObj.fromNickname=this.$store.state.currentUser.nickname;\n        msgObj.to=this.currentSession.username;\n        this.$store.state.stomp.send(\"/ws/chat\",{},JSON.stringify(msgObj));\n        //提交私聊消息记录\n        this.$store.commit('addMessage',msgObj);\n      }\n      //清空输入框\n      this.content='';\n    },\n  \taddMessage (e) {\n  \t\tif (e.ctrlKey && e.keyCode ===13 && this.content.length) {\n  \t\t   this.addMessageByClick();\n  \t\t}\n  \t},\n\n\n\n\n\n  }\n}\n</script>\n\n\n<style lang=\"scss\">\n  /* el-popover是和app同级的，所以scoped的局部属性设置无效 */\n  /* 需要设置全局style */\n  .el-popover{\n    height:200px;\n    width:450px;\n    overflow: scroll;\n    overflow-x:auto;\n  }\n</style>\n\n<style lang=\"scss\" scoped>\n#uesrtext {\n\tposition: absolute;\n  bottom: 0;\n  right: 0;\n  width: 100%;\n  height: 30%;\n  border: solid 1px #DDD;\n  background-color: white;\n  > textarea {\n  \tpadding: 10px;\n  \twidth: 95%;\n  \theight: 58%;\n  \tborder: none;\n  \toutline: none;\n    resize: none;//禁止拉伸\n  }\n  #sendBtn{\n    float: right;\n    margin-right: 10px;\n  }\n  #uploadImgBtn{\n    border: none;\n    padding-bottom: 0px;\n    margin-bottom: 0px;\n    padding-left: 12px;\n  }\n  #uploadImgBtn:hover{\n    background-color: white;\n  }\n  #emojiBtn{\n    border: none;\n    padding-right: 0px;\n    padding-bottom: 0px;\n    margin-bottom: 0px;\n  }\n  #emojiBtn:hover{\n    background-color: white;\n  }\n  .upload-btn{\n    display: inline-block;\n  }\n}\n.emotionList{\n  display: flex;\n  flex-wrap: wrap;\n  padding:5px;\n}\n.emotionItem{\n  width:10%;\n  font-size:20px;\n  text-align:center;\n}\n/*包含以下四种的链接*/\n.emotionItem {\n  text-decoration: none;\n}\n/*正常的未被访问过的链接*/\n.emotionItem:link {\n  text-decoration: none;\n}\n/*已经访问过的链接*/\n.emotionItem:visited {\n  text-decoration: none;\n}\n/*鼠标划过(停留)的链接*/\n.emotionItem:hover {\n  text-decoration: none;\n}\n/* 正在点击的链接*/\n.emotionItem:active {\n  text-decoration: none;\n}\n</style>\n"]}]}