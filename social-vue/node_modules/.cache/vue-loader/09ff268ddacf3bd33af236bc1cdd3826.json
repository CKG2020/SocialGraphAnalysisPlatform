{"remainingRequest":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/src/views/teacher/MarkManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/src/views/teacher/MarkManage.vue","mtime":1648737495000},{"path":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBleGFtIGZyb20gJ0AvYXBpL2V4YW0nCmltcG9ydCB1c2VyIGZyb20gJ0AvYXBpL3VzZXInCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ01hcmtNYW5hZ2UnLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgcXVlcnlJbmZvOiB7CiAgICAgICAgcGFnZU5vOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMAogICAgICB9LAogICAgICAvL+iAg+ivleiusOW9lQogICAgICBleGFtUmVjb3JkczogW10sCiAgICAgIC8v6KGo5qC85pWw5o2u5Yqg6L29CiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIC8v5omA5pyJ6ICD6K+V5L+h5oGvCiAgICAgIGFsbEV4YW1JbmZvOiBbXSwKICAgICAgLy/mgLvmlbAKICAgICAgdG90YWw6IDAKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5nZXRFeGFtUmVjb3JkcygpCiAgICB0aGlzLmdldEFsbEV4YW1JbmZvKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldEV4YW1SZWNvcmRzICgpIHsKICAgICAgYXdhaXQgZXhhbS5nZXRFeGFtUmVjb3JkKHRoaXMucXVlcnlJbmZvKS50aGVuKChyZXNwKSA9PiB7CiAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmdldEFsbEV4YW1JbmZvKCkKICAgICAgICAgIHJlc3AuZGF0YS5kYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgIHVzZXIuZ2V0VXNlckJ5SWQoaXRlbS51c2VySWQpLnRoZW4oKHIpID0+IHsKICAgICAgICAgICAgICBpdGVtLnRydWVOYW1lID0gci5kYXRhLnRydWVOYW1lCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5leGFtUmVjb3JkcyA9IHJlc3AuZGF0YS5kYXRhCiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcC5kYXRhLnRvdGFsCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBnZXRBbGxFeGFtSW5mbyAoKSB7CiAgICAgIGV4YW0uYWxsRXhhbUluZm8oKS50aGVuKChyZXNwKSA9PiB7CiAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmFsbEV4YW1JbmZvID0gcmVzcC5kYXRhCiAgICAgICAgICB0aGlzLnNldEV4YW1OYW1lKCkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgb3BlcmF0aW9uICh2KSB7CiAgICAgIGlmICh2ID09PSAnJykgdGhpcy5xdWVyeUluZm8uZXhhbUlkID0gbnVsbAogICAgICB0aGlzLmdldEV4YW1SZWNvcmRzKCkKICAgIH0sCiAgICBzZXRFeGFtTmFtZSAoKSB7CiAgICAgIHRoaXMuZXhhbVJlY29yZHMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICB0aGlzLmFsbEV4YW1JbmZvLmZvckVhY2goaTIgPT4gewogICAgICAgICAgaWYgKGl0ZW0uZXhhbUlkID09PSBpMi5leGFtSWQpIHsKICAgICAgICAgICAgdGhpcy4kc2V0KGl0ZW0sICdleGFtTmFtZScsIGkyLmV4YW1OYW1lKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgLy/liIbpobXpobXpnaLlpKflsI/mlLnlj5gKICAgIGhhbmRsZVNpemVDaGFuZ2UgKHZhbCkgewogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlU2l6ZSA9IHZhbAogICAgICB0aGlzLmdldEV4YW1SZWNvcmRzKCkKICAgIH0sCiAgICAvL+WIhumhteaPkuS7tueahOmhteaVsAogICAgaGFuZGxlQ3VycmVudENoYW5nZSAodmFsKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VObyA9IHZhbAogICAgICB0aGlzLmdldEV4YW1SZWNvcmRzKCkKICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["MarkManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MarkManage.vue","sourceRoot":"src/views/teacher","sourcesContent":["<template>\n  <el-container>\n    <el-header>\n      <!--操作的下拉框-->\n      <el-select @change=\"operation\" clearable v-model=\"queryInfo.examId\"\n                 placeholder=\"请选择考试\" style=\"margin-bottom: 25px;\">\n        <el-option v-for=\"(item,index) in allExamInfo\" :key=\"index\" :label=\"item.examName\"\n                   :value=\"parseInt(item.examId)\">\n          <span style=\"float: left\">{{ item.examName }}</span>\n        </el-option>\n      </el-select>\n\n    </el-header>\n\n    <el-main>\n      <el-table\n        ref=\"questionTable\"\n        highlight-current-row\n        v-loading=\"loading\"\n        :border=\"true\"\n        :data=\"examRecords\"\n        tooltip-effect=\"dark\"\n        style=\"width: 100%;\">\n\n        <el-table-column align=\"center\" prop=\"examName\" label=\"考试名称\"></el-table-column>\n\n        <el-table-column align=\"center\" prop=\"examTime\" label=\"参考时间\"></el-table-column>\n\n        <el-table-column align=\"center\" prop=\"trueName\" label=\"参考人\"></el-table-column>\n\n        <el-table-column align=\"center\" prop=\"logicScore\" label=\"逻辑题得分\"></el-table-column>\n\n        <el-table-column align=\"center\" label=\"是否批阅\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.totalScore === null ? '未批阅' : '已批阅' }}</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column align=\"center\" label=\"总分\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.totalScore === null ? 0 : scope.row.totalScore }}</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column align=\"center\" label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button :type=\"scope.row.totalScore === null ? 'primary' : 'warning'\" icon=\"el-icon-view\" size=\"small\"\n                       :disabled=\"scope.row.totalScore !== null\"\n                       @click=\"$router.push('/markExam/' + scope.row.recordId)\">\n              {{ scope.row.totalScore === null ? '批阅' : '已批阅' }}\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!--分页-->\n      <el-pagination style=\"margin-top: 25px\"\n                     @size-change=\"handleSizeChange\"\n                     @current-change=\"handleCurrentChange\"\n                     :current-page=\"queryInfo.pageNo\"\n                     :page-sizes=\"[10, 20, 30, 50]\"\n                     :page-size=\"queryInfo.pageSize\"\n                     layout=\"total, sizes, prev, pager, next, jumper\"\n                     :total=\"total\">\n      </el-pagination>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\nimport exam from '@/api/exam'\nimport user from '@/api/user'\n\nexport default {\n  name: 'MarkManage',\n  data () {\n    return {\n      queryInfo: {\n        pageNo: 1,\n        pageSize: 10\n      },\n      //考试记录\n      examRecords: [],\n      //表格数据加载\n      loading: true,\n      //所有考试信息\n      allExamInfo: [],\n      //总数\n      total: 0\n    }\n  },\n  created () {\n    this.getExamRecords()\n    this.getAllExamInfo()\n  },\n  methods: {\n    async getExamRecords () {\n      await exam.getExamRecord(this.queryInfo).then((resp) => {\n        if (resp.code === 200) {\n          this.getAllExamInfo()\n          resp.data.data.forEach(item => {\n            user.getUserById(item.userId).then((r) => {\n              item.trueName = r.data.trueName\n            })\n          })\n          this.examRecords = resp.data.data\n          this.total = resp.data.total\n          this.loading = false\n        }\n      })\n    },\n    getAllExamInfo () {\n      exam.allExamInfo().then((resp) => {\n        if (resp.code === 200) {\n          this.allExamInfo = resp.data\n          this.setExamName()\n        }\n      })\n    },\n    operation (v) {\n      if (v === '') this.queryInfo.examId = null\n      this.getExamRecords()\n    },\n    setExamName () {\n      this.examRecords.forEach(item => {\n        this.allExamInfo.forEach(i2 => {\n          if (item.examId === i2.examId) {\n            this.$set(item, 'examName', i2.examName)\n          }\n        })\n      })\n    },\n    //分页页面大小改变\n    handleSizeChange (val) {\n      this.queryInfo.pageSize = val\n      this.getExamRecords()\n    },\n    //分页插件的页数\n    handleCurrentChange (val) {\n      this.queryInfo.pageNo = val\n      this.getExamRecords()\n    },\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../../assets/css/teacher/markManage\";\n</style>\n"]}]}