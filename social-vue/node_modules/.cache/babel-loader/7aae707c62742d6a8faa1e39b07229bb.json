{"remainingRequest":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/node_modules/babel-loader/lib/index.js!/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/src/views/student/ExamPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/src/views/student/ExamPage.vue","mtime":1648737495000},{"path":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/babel.config.js","mtime":1648737495000},{"path":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ckg/a2022download/学习前端/exam_system-master/exam-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2NrZy9hMjAyMmRvd25sb2FkL1x1NUI2Nlx1NEU2MFx1NTI0RFx1N0FFRi9leGFtX3N5c3RlbS1tYXN0ZXIvZXhhbS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmF0b2IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWV4Y2VwdGlvbi5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tZXhjZXB0aW9uLnN0YWNrLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1leGNlcHRpb24udG8tc3RyaW5nLXRhZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQ4LWFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5jb3B5LXdpdGhpbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmV2ZXJ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubGFzdC1pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS1yaWdodC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJldmVyc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc3ViYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1sb2NhbGUtc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmRvdC1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuc3RpY2t5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGV4YW0gZnJvbSAnQC9hcGkvZXhhbSc7CmltcG9ydCBxdWVzdGlvbiBmcm9tICdAL2FwaS9xdWVzdGlvbic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRXhhbVBhZ2UnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvL+W9k+WJjeiAg+ivleeahOS/oeaBrwogICAgICBleGFtSW5mbzoge30sCiAgICAgIC8v5b2T5YmN55qE6ICD6K+V6aKY55uuCiAgICAgIHF1ZXN0aW9uSW5mbzogW3sKICAgICAgICBxdWVzdGlvblR5cGU6ICcnCiAgICAgIH1dLAogICAgICAvL+W9k+WJjemimOebrueahOe0ouW8leWAvAogICAgICBjdXJJbmRleDogMCwKICAgICAgLy/mjqfliLblpKflm77nmoTlr7nor53moYYKICAgICAgYmlnSW1nRGlhbG9nOiBmYWxzZSwKICAgICAgLy/lvZPliY3opoHlsZXnpLrnmoTlpKflm77nmoR1cmwKICAgICAgYmlnSW1nVXJsOiAnJywKICAgICAgLy/nlKjmiLfpgInmi6nnmoTnrZTmoYgKICAgICAgdXNlckFuc3dlcjogW10sCiAgICAgIC8v6aG16Z2i5pWw5o2u5Yqg6L29CiAgICAgIGxvYWRpbmc6IHt9LAogICAgICAvL+mhtemdoue7mOWItuaYr+WQpuW8gOWniwogICAgICBzaG93OiBmYWxzZSwKICAgICAgLy/nrZTmoYjnmoTpgInpobnlkI1hYmNk5pWw5o2uCiAgICAgIG9wdGlvbk5hbWU6IFsnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSicsICdLJywgJ0wnLCAnTScsICdOJywgJ08nLCAnUCcsICdRJywgJ1InLCAnUycsICdUJywgJ1UnLCAnVicsICdXJywgJ1gnLCAnWScsICdaJ10sCiAgICAgIC8v6ICD6K+V5oC75pe26ZW/CiAgICAgIGR1cmF0aW9uOiAwLAogICAgICAvL+aRhOWDj+WktOWvueixoQogICAgICBtZWRpYVN0cmVhbVRyYWNrOiBudWxsLAogICAgICAvL+ivmuS/oeeFp+eJh+eahHVybAogICAgICB0YWtlUGhvdG9Vcmw6IFtdLAogICAgICAvL+aRhOWDj+WktOaYr+WQpuW8gOWQrwogICAgICBjYW1lcmFPbjogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmdldEV4YW1JbmZvKCk7IC8v6aG16Z2i5pWw5o2u5Yqg6L2955qE562J5b6F54q25oCB5qCPCgogICAgdGhpcy5sb2FkaW5nID0gdGhpcy4kTG9hZGluZy5zZXJ2aWNlKHsKICAgICAgYm9keTogdHJ1ZSwKICAgICAgbG9jazogdHJ1ZSwKICAgICAgdGV4dDogJ+aVsOaNruaLvOWRveWKoOi9veS4rSwoKuKVueKWveKVuSopJywKICAgICAgc3Bpbm5lcjogJ2VsLWljb24tbG9hZGluZycKICAgIH0pOyAvL+W8gOWQr+aRhOWDj+WktAoKICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmdldENhbWVyYSgpOwogICAgICB9LCAxMDAwKTsgLy/nlJ/miJAz5qyh5pe26Ze054K55oiq5Zu+CgogICAgICB2YXIgdGltZXMgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjsgaSsrKSB7CiAgICAgICAgdGltZXMucHVzaChNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIF90aGlzLmR1cmF0aW9uICogMTAwMCkpOwogICAgICB9CgogICAgICB0aW1lcy5wdXNoKDEwMDAwKTsgLy/kuIDmrKHogIPor5XmnIDlpJoz5qyh6ZqP5py655qE6K+a5L+h5oiq5Zu+CgogICAgICB0aW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMudGFrZVBob3RvKCk7CiAgICAgICAgfSwgaXRlbSk7CiAgICAgIH0pOwogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvL+WFs+mXrea1j+iniOWZqOeql+WPo+eahOaXtuWAmeenu+mZpCBsb2NhbHN0b3JhZ2XnmoTml7bplb8KICAgIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50OyAvL+WPluW+l+a1j+iniOWZqOeahHVzZXJBZ2VudOWtl+espuS4sgoKICAgIHZhciBpc09wZXJhID0gdXNlckFnZW50LmluZGV4T2YoJ09wZXJhJykgPiAtMTsgLy/liKTmlq3mmK/lkKZPcGVyYea1j+iniOWZqAoKICAgIHZhciBpc0lFID0gdXNlckFnZW50LmluZGV4T2YoJ2NvbXBhdGlibGUnKSA+IC0xICYmIHVzZXJBZ2VudC5pbmRleE9mKCdNU0lFJykgPiAtMSAmJiAhaXNPcGVyYTsgLy/liKTmlq3mmK/lkKZJRea1j+iniOWZqAoKICAgIHZhciBpc0lFMTEgPSB1c2VyQWdlbnQuaW5kZXhPZigncnY6MTEuMCcpID4gLTE7IC8v5Yik5pat5piv5ZCm5pivSUUxMea1j+iniOWZqAoKICAgIHZhciBpc0VkZ2UgPSB1c2VyQWdlbnQuaW5kZXhPZignRWRnZScpID4gLTEgJiYgIWlzSUU7IC8v5Yik5pat5piv5ZCmSUXnmoRFZGdl5rWP6KeI5ZmoCgogICAgaWYgKCFpc0lFICYmICFpc0VkZ2UgJiYgIWlzSUUxMSkgewogICAgICAvL+WFvOWuuWNocm9tZeWSjGZpcmVmb3gKICAgICAgdmFyIF9iZWZvcmVVbmxvYWRfdGltZSA9IDAsCiAgICAgICAgICBfZ2FwX3RpbWUgPSAwOwogICAgICB2YXIgaXNfZmlyZUZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpID4gLTE7IC8v5piv5ZCm5piv54Gr54uQ5rWP6KeI5ZmoCgogICAgICB3aW5kb3cub251bmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgX2dhcF90aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBfYmVmb3JlVW5sb2FkX3RpbWU7CgogICAgICAgIGlmIChfZ2FwX3RpbWUgPD0gNSkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2V4YW1EdXJhdGlvbicgKyB0aGlzLmV4YW1JbmZvLmV4YW1JZCk7CiAgICAgICAgfSBlbHNlIHsvL+iwt+atjOa1j+iniOWZqOWIt+aWsAogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBfYmVmb3JlVW5sb2FkX3RpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCiAgICAgICAgaWYgKGlzX2ZpcmVGb3gpIHsvL+eBq+eLkOWFs+mXreaJp+ihjAogICAgICAgIH0gZWxzZSB7Ly/ngavni5DmtY/op4jlmajliLfmlrAKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+afpeivouW9k+WJjeiAg+ivleeahOS/oeaBrwogICAgZ2V0RXhhbUluZm86IGZ1bmN0aW9uIGdldEV4YW1JbmZvKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGV4YW0uZ2V0RXhhbUluZm9CeUlkKHRoaXMuJHJvdXRlLnBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgX3RoaXMyLmV4YW1JbmZvID0gcmVzcC5kYXRhOyAvL+iuvue9ruWumuaXtijnp5IpCgogICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdleGFtRHVyYXRpb24nICsgX3RoaXMyLmV4YW1JbmZvLmV4YW1JZCkgPT09ICcwJykgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2V4YW1EdXJhdGlvbicgKyBfdGhpczIuZXhhbUluZm8uZXhhbUlkKTsKICAgICAgICAgIF90aGlzMi5kdXJhdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdleGFtRHVyYXRpb24nICsgX3RoaXMyLmV4YW1JbmZvLmV4YW1JZCkgfHwgcmVzcC5kYXRhLmV4YW1EdXJhdGlvbiAqIDYwOyAvL+iAg+ivleWJqeS9meaXtumXtOWumuaXtuWZqAoKICAgICAgICAgIF90aGlzMi50aW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpczIuZHVyYXRpb24gPiAwKSBfdGhpczIuZHVyYXRpb24tLTsKICAgICAgICAgIH0sIDEwMDApOwoKICAgICAgICAgIF90aGlzMi5nZXRRdWVzdGlvbkluZm8ocmVzcC5kYXRhLnF1ZXN0aW9uSWRzLnNwbGl0KCcsJykpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/mn6Xor6LogIPor5XnmoTpopjnm67kv6Hmga8KICAgIGdldFF1ZXN0aW9uSW5mbzogZnVuY3Rpb24gZ2V0UXVlc3Rpb25JbmZvKGlkcykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gaWRzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uLmdldFF1ZXN0aW9uQnlJZChpdGVtKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSBfdGhpczMucXVlc3Rpb25JbmZvID0gW107CgogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnF1ZXN0aW9uSW5mby5wdXNoKHJlc3AuZGF0YSk7IC8v6YeN572u6Zeu6aKY55qE6aG65bqPIOWNlemAiSDlpJrpgIkg5Yik5patIOeugOetlAoKCiAgICAgICAgICAgICAgICAgICAgICAvL+mHjee9rumXrumimOeahOmhuuW6jyDljZXpgIkg5aSa6YCJIOWIpOaWrSDnroDnrZQKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5xdWVzdGlvbkluZm8gPSBfdGhpczMucXVlc3Rpb25JbmZvLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEucXVlc3Rpb25UeXBlIC0gYi5xdWVzdGlvblR5cGU7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF90aGlzMy5sb2FkaW5nLmNsb3NlKCk7CgogICAgICAgICAgICAgICAgX3RoaXMzLnNob3cgPSB0cnVlOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy/ngrnlh7vlsZXnpLrpq5jmuIXlpKflm74KICAgIHNob3dCaWdJbWc6IGZ1bmN0aW9uIHNob3dCaWdJbWcodXJsKSB7CiAgICAgIHRoaXMuYmlnSW1nVXJsID0gdXJsOwogICAgICB0aGlzLmJpZ0ltZ0RpYWxvZyA9IHRydWU7CiAgICB9LAogICAgLy/mo4DpqozljZXpgInpopjnmoTnlKjmiLfpgInmi6nnmoTnrZTmoYgKICAgIGNoZWNrU2luZ2xlQW5zd2VyOiBmdW5jdGlvbiBjaGVja1NpbmdsZUFuc3dlcihpbmRleCkgewogICAgICB0aGlzLiRzZXQodGhpcy51c2VyQW5zd2VyLCB0aGlzLmN1ckluZGV4LCBpbmRleCk7CiAgICB9LAogICAgLy/lpJrpgInpopjnlKjmiLfnmoTnrZTmoYjpgInkuK0KICAgIHNlbGVjdGVkTXVsdGlwbGVBbnN3ZXI6IGZ1bmN0aW9uIHNlbGVjdGVkTXVsdGlwbGVBbnN3ZXIoaW5kZXgpIHsKICAgICAgaWYgKHRoaXMudXNlckFuc3dlclt0aGlzLmN1ckluZGV4XSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy/lvZPliY3mmK/lpJrpgInnmoTnrKzkuIDkuKrnrZTmoYgKICAgICAgICB0aGlzLiRzZXQodGhpcy51c2VyQW5zd2VyLCB0aGlzLmN1ckluZGV4LCBpbmRleCk7CiAgICAgIH0gZWxzZSBpZiAoU3RyaW5nKHRoaXMudXNlckFuc3dlclt0aGlzLmN1ckluZGV4XSkuc3BsaXQoJywnKS5pbmNsdWRlcyhpbmRleCArICcnKSkgewogICAgICAgIC8v5Y+W5raI6YCJ5LitCiAgICAgICAgdmFyIG5ld0FyciA9IFtdOwogICAgICAgIFN0cmluZyh0aGlzLnVzZXJBbnN3ZXJbdGhpcy5jdXJJbmRleF0pLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgaWYgKGl0ZW0gIT09ICcnICsgaW5kZXgpIG5ld0Fyci5wdXNoKGl0ZW0pOwogICAgICAgIH0pOwoKICAgICAgICBpZiAobmV3QXJyLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgdGhpcy4kc2V0KHRoaXMudXNlckFuc3dlciwgdGhpcy5jdXJJbmRleCwgdW5kZWZpbmVkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kc2V0KHRoaXMudXNlckFuc3dlciwgdGhpcy5jdXJJbmRleCwgbmV3QXJyLmpvaW4oJywnKSk7IC8v562U5qGI5qC85byP5YyW6aG65bqPREJBQyAtPiBBQkNECgogICAgICAgICAgdGhpcy51c2VyQW5zd2VyW3RoaXMuY3VySW5kZXhdID0gU3RyaW5nKHRoaXMudXNlckFuc3dlclt0aGlzLmN1ckluZGV4XSkuc3BsaXQoJywnKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgIHJldHVybiBhIC0gYjsKICAgICAgICAgIH0pLmpvaW4oJywnKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoISh0aGlzLnVzZXJBbnN3ZXJbdGhpcy5jdXJJbmRleF0gKyAnJykuc3BsaXQoJywnKS5pbmNsdWRlcyhpbmRleCArICcnKSkgewogICAgICAgIC8v56ysbuS4quetlOahiAogICAgICAgIHRoaXMuJHNldCh0aGlzLnVzZXJBbnN3ZXIsIHRoaXMuY3VySW5kZXgsIHRoaXMudXNlckFuc3dlclt0aGlzLmN1ckluZGV4XSArPSAnLCcgKyBpbmRleCk7IC8v562U5qGI5qC85byP5YyW6aG65bqPREJBQyAtPiBBQkNECgogICAgICAgIHRoaXMudXNlckFuc3dlclt0aGlzLmN1ckluZGV4XSA9IFN0cmluZyh0aGlzLnVzZXJBbnN3ZXJbdGhpcy5jdXJJbmRleF0pLnNwbGl0KCcsJykuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgICAgIH0pLmpvaW4oJywnKTsKICAgICAgfQogICAgfSwKICAgIC8v6LCD55So5pGE5YOP5aS0CiAgICBnZXRDYW1lcmE6IGZ1bmN0aW9uIGdldENhbWVyYSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgY29uc3RyYWludHMgPSB7CiAgICAgICAgdmlkZW86IHsKICAgICAgICAgIHdpZHRoOiAyMDAsCiAgICAgICAgICBoZWlnaHQ6IDIwMAogICAgICAgIH0sCiAgICAgICAgYXVkaW86IGZhbHNlCiAgICAgIH07IC8v6I635b6XdmlkZW/mkYTlg4/lpLQKCiAgICAgIHZhciB2aWRlbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRlbycpOwogICAgICB2YXIgcHJvbWlzZSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKTsKICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChtZWRpYVN0cmVhbSkgewogICAgICAgIF90aGlzNC5tZWRpYVN0cmVhbVRyYWNrID0gdHlwZW9mIG1lZGlhU3RyZWFtLnN0b3AgPT09ICdmdW5jdGlvbicgPyBtZWRpYVN0cmVhbSA6IG1lZGlhU3RyZWFtLmdldFRyYWNrcygpWzFdOwogICAgICAgIHZpZGVvLnNyY09iamVjdCA9IG1lZGlhU3RyZWFtOwogICAgICAgIHZpZGVvLnBsYXkoKTsKICAgICAgICBfdGhpczQuY2FtZXJhT24gPSB0cnVlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoYmFjaykgewogICAgICAgIF90aGlzNC4kbWVzc2FnZSh7CiAgICAgICAgICBkdXJhdGlvbjogMTUwMCwKICAgICAgICAgIG1lc3NhZ2U6ICfor7flvIDlkK/mkYTlg4/lpLTmnYPpmZBvKOKVpe+5j+KVpSlvIScsCiAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5ouN54WnCiAgICB0YWtlUGhvdG86IGZ1bmN0aW9uIHRha2VQaG90bygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBpZiAodGhpcy5jYW1lcmFPbikgewogICAgICAgIC8v5pGE5YOP5aS05piv5ZCm5byA5ZCvIOW8gOWQr+S6huaJjeaJp+ihjOS4iuS8oOS/oeeUqOWbvueJhwogICAgICAgIC8v6I635b6XQ2FudmFz5a+56LGhCiAgICAgICAgdmFyIHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZGVvJyk7CiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTsKICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgY3R4LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgMjAwLCAyMDApOyAvLyB0b0RhdGFVUkwgIC0tLSAg5Y+v5Lyg5YWlJ2ltYWdlL3BuZyctLS3pu5jorqQsICdpbWFnZS9qcGVnJwoKICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpLnRvRGF0YVVSTCgpOyAvL+aehOmAoHBvc3TnmoRmb3Jt6KGo5Y2VCgogICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOyAvL2NvbnZlcnRCYXNlNjRVcmxUb0Jsb2Llh73mlbDmmK/lsIZiYXNlNjTnvJbnoIHovazmjaLkuLpCbG9iCgogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMuYmFzZTY0VG9GaWxlKGltZywgJ2V4YW1UYWtlUGhvdG8ucG5nJykpOyAvL+S4iuS8oOmYv+mHjOS6kU9TUwoKICAgICAgICB0aGlzLiRodHRwLnBvc3QodGhpcy5BUEkudXBsb2FkUXVlc3Rpb25JbWFnZSwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIGlmIChyZXNwLmRhdGEuY29kZSA9PT0gMjAwKSBfdGhpczUudGFrZVBob3RvVXJsLnB1c2gocmVzcC5kYXRhLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy/lhbPpl63mkYTlg4/lpLQKICAgIGNsb3NlQ2FtZXJhOiBmdW5jdGlvbiBjbG9zZUNhbWVyYSgpIHsKICAgICAgdmFyIHN0cmVhbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRlbycpLnNyY09iamVjdDsKICAgICAgdmFyIHRyYWNrcyA9IHN0cmVhbS5nZXRUcmFja3MoKTsKICAgICAgdHJhY2tzLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgdHJhY2suc3RvcCgpOwogICAgICB9KTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZGVvJykuc3JjT2JqZWN0ID0gbnVsbDsKICAgIH0sCiAgICAvL+WwhuaRhOWDj+WktOaIquWbvueahGJhc2U2NOS4sui9rOWMluS4umZpbGXmj5DkuqTlkI7lj7AKICAgIGJhc2U2NFRvRmlsZTogZnVuY3Rpb24gYmFzZTY0VG9GaWxlKHVybERhdGEsIGZpbGVOYW1lKSB7CiAgICAgIHZhciBhcnIgPSB1cmxEYXRhLnNwbGl0KCcsJyk7CiAgICAgIHZhciBtaW1lID0gYXJyWzBdLm1hdGNoKC86KC4qPyk7LylbMV07CiAgICAgIHZhciBieXRlcyA9IGF0b2IoYXJyWzFdKTsgLy8g6Kej56CBYmFzZTY0CgogICAgICB2YXIgbiA9IGJ5dGVzLmxlbmd0aDsKICAgICAgdmFyIGlhID0gbmV3IFVpbnQ4QXJyYXkobik7CgogICAgICB3aGlsZSAobi0tKSB7CiAgICAgICAgaWFbbl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IEZpbGUoW2lhXSwgZmlsZU5hbWUsIHsKICAgICAgICB0eXBlOiBtaW1lCiAgICAgIH0pOwogICAgfSwKICAgIC8v5LiK5Lyg55So5oi36ICD6K+V5L+h5oGv6L+b5YWl5ZCO5Y+wCiAgICB1cGxvYWRFeGFtVG9BZG1pbjogZnVuY3Rpb24gdXBsb2FkRXhhbVRvQWRtaW4oKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHJlZywgZmxhZywgaSwgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczYuY2FtZXJhT24pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LnRha2VQaG90bygpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAvL+e7k+adn+eahOaXtuWAmeaLjeeFp+S4iuS8oOS4gOW8oAogICAgICAgICAgICAgICAgLy8g5q2j5YiZCiAgICAgICAgICAgICAgICByZWcgPSBuZXcgUmVnRXhwKCctJywgJ2cnKTsgLy8g5Y675o6J55So5oi36L6T5YWl55qE6Z2e5rOV5YiG5Ymy56ym5Y+3KC0pLOS/neivgeWQjuerr+aOpeWPl+aVsOaNruWkhOeQhuS4jeaKpemUmQoKICAgICAgICAgICAgICAgIF90aGlzNi51c2VyQW5zd2VyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczYucXVlc3Rpb25JbmZvW2luZGV4XS5xdWVzdGlvblR5cGUgPT09IDQpIHsKICAgICAgICAgICAgICAgICAgICAvL+eugOetlOmimOetlOahiOWkhOeQhgogICAgICAgICAgICAgICAgICAgIF90aGlzNi51c2VyQW5zd2VyW2luZGV4XSA9IGl0ZW0ucmVwbGFjZShyZWcsICcgJyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOyAvLyDmoIforrDpopjnm67mmK/lkKblhajpg6jlgZrlrowKCgogICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7CgogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IF90aGlzNi51c2VyQW5zd2VyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIC8vIOajgOa1i+eUqOaIt+aYr+WQpumimOebruWFqOmDqOWBmuWujAogICAgICAgICAgICAgICAgICBpZiAoX3RoaXM2LnVzZXJBbnN3ZXJbaV0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIGZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSAvLyDlpoLmnpznlKjmiLfmiYDmnInnrZTmoYjnmoTmlbDnu4Tplb/luqblsI/kuo7popjnm67plb/luqYs6L+Z5Liq5pe25YCZ5Lmf6KaB5bCG5qCH5b+X5L2N572u5Li6ZmFsc2UKCgogICAgICAgICAgICAgICAgaWYgKF90aGlzNi51c2VyQW5zd2VyLmxlbmd0aCA8IF90aGlzNi5xdWVzdGlvbkluZm8ubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0gLy/popjnm67mnKrlgZrlrowKCgogICAgICAgICAgICAgICAgaWYgKCFmbGFnKSB7CiAgICAgICAgICAgICAgICAgIC8vIGlmICh0aGlzLnVzZXJBbnN3ZXIuc29tZSgoaXRlbSkgPT4gaXRlbSA9PT0gdW5kZWZpbmVkKSkgewogICAgICAgICAgICAgICAgICBfdGhpczYuJGNvbmZpcm0oJ+W9k+WJjeivlemimOaaguacquWBmuWujCwg5piv5ZCm57un57ut5o+Q5LqkbyjilaXvuY/ilaUpbyA/JywgJ1RpcHMnLCB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9OwogICAgICAgICAgICAgICAgICAgIGRhdGEucXVlc3Rpb25JZHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBkYXRhLnVzZXJBbnN3ZXJzID0gX3RoaXM2LnVzZXJBbnN3ZXIuam9pbignLScpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczYucXVlc3Rpb25JbmZvLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICBkYXRhLnF1ZXN0aW9uSWRzLnB1c2goaXRlbS5xdWVzdGlvbklkKTsgLy/lvZPliY3mlbDmja7kuI3lrozmlbQs55So5oi35Zue562U5LiN5a6M5pW0KOaIkeS7rOiHquWKqOihpeWFheepuuetlOahiCzpmLLmraLkuJrliqHlh7rplJkpCgogICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gX3RoaXM2LnVzZXJBbnN3ZXIubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnVzZXJBbnN3ZXJzICs9ICctICc7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7IC8v5aaC5p6c5omA5pyJ6aKY55uu5YWo6YOo5pyq562UCgoKICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM2LnVzZXJBbnN3ZXIubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczYucXVlc3Rpb25JbmZvLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS51c2VyQW5zd2VycyArPSAnIC0nOwogICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgZGF0YS51c2VyQW5zd2Vycy5zcGxpdCgwLCBkYXRhLnVzZXJBbnN3ZXJzLmxlbmd0aCAtIDEpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZGF0YS5leGFtSWQgPSBwYXJzZUludChfdGhpczYuJHJvdXRlLnBhcmFtcy5leGFtSWQpOwogICAgICAgICAgICAgICAgICAgIGRhdGEucXVlc3Rpb25JZHMgPSBkYXRhLnF1ZXN0aW9uSWRzLmpvaW4oJywnKTsKICAgICAgICAgICAgICAgICAgICBkYXRhLmNyZWRpdEltZ1VybCA9IF90aGlzNi50YWtlUGhvdG9Vcmwuam9pbignLCcpOwogICAgICAgICAgICAgICAgICAgIGV4YW0uYWRkRXhhbVJlY29yZChkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcC5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LiRub3RpZnkoewogICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnVGlwcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+iAg+ivlee7k+adnyAqXuKWvV4qJywKICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczYuJHJvdXRlci5wdXNoKCcvZXhhbVJlc3VsdC8nICsgcmVzcC5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzNi4kbm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnVGlwcycsCiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn57un57ut5Yqg5rK5ISAqXuKWvV4qJywKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy/lvZPliY3popjnm67lgZrlrozkuoYKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNi5jYW1lcmFPbikgewogICAgICAgICAgICAgICAgICAgIC8v57uT5p2f55qE5pe25YCZ5ouN54Wn5LiK5Lyg5LiA5bygCiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LnRha2VQaG90bygpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczYuY2xvc2VDYW1lcmEoKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgZGF0YSA9IHt9OwogICAgICAgICAgICAgICAgICBkYXRhLnF1ZXN0aW9uSWRzID0gW107CiAgICAgICAgICAgICAgICAgIGRhdGEudXNlckFuc3dlcnMgPSBfdGhpczYudXNlckFuc3dlci5qb2luKCctJyk7CiAgICAgICAgICAgICAgICAgIGRhdGEuZXhhbUlkID0gcGFyc2VJbnQoX3RoaXM2LiRyb3V0ZS5wYXJhbXMuZXhhbUlkKTsKICAgICAgICAgICAgICAgICAgZGF0YS5jcmVkaXRJbWdVcmwgPSBfdGhpczYudGFrZVBob3RvVXJsLmpvaW4oJywnKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzNi5xdWVzdGlvbkluZm8uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICBkYXRhLnF1ZXN0aW9uSWRzLnB1c2goaXRlbS5xdWVzdGlvbklkKTsKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBkYXRhLnF1ZXN0aW9uSWRzID0gZGF0YS5xdWVzdGlvbklkcy5qb2luKCcsJyk7CiAgICAgICAgICAgICAgICAgIGV4YW0uYWRkRXhhbVJlY29yZChkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczYuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnVGlwcycsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfogIPor5Xnu5PmnZ8gKl7ilr1eKicsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi4kcm91dGVyLnB1c2goJy9leGFtUmVzdWx0LycgKyByZXNwLmRhdGEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIC8v55uR5o6n6ICD6K+V55qE5Ymp5L2Z5pe26Ze0CiAgICBkdXJhdGlvbjogZnVuY3Rpb24gZHVyYXRpb24obmV3VmFsKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2V4YW1EdXJhdGlvbicgKyB0aGlzLmV4YW1JbmZvLmV4YW1JZCwgbmV3VmFsKTsgLy/mkYTlg4/lpLTmlbDmja4KCiAgICAgIHZhciBjb25zdHJhaW50cyA9IHsKICAgICAgICB2aWRlbzogewogICAgICAgICAgd2lkdGg6IDIwMCwKICAgICAgICAgIGhlaWdodDogMjAwCiAgICAgICAgfSwKICAgICAgICBhdWRpbzogZmFsc2UKICAgICAgfTsgLy/pgJrov4fosIPnlKjmkYTlg4/lpLTliKTmlq3nlKjmiLfmmK/lkKbkuK3pgJTlhbPpl63mkYTlg4/lpLQKCiAgICAgIHZhciBwcm9taXNlID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpOwogICAgICBwcm9taXNlLmNhdGNoKGZ1bmN0aW9uIChiYWNrKSB7CiAgICAgICAgX3RoaXM3LmNhbWVyYU9uID0gZmFsc2U7CiAgICAgIH0pOwoKICAgICAgaWYgKCF0aGlzLmNhbWVyYU9uKSB7CiAgICAgICAgLy/lpoLmnpzmkYTlg4/lpLTmnKrlvIDlkK8s5bCx5YaN5qyh6LCD55So5byA5ZCvCiAgICAgICAgdGhpcy5nZXRDYW1lcmEoKTsKICAgICAgfSAvL+iAg+ivleaXtumXtOe7k+adn+S6huaPkOS6pOivleWNtwoKCiAgICAgIGlmIChuZXdWYWwgPCAxKSB7CiAgICAgICAgaWYgKHRoaXMuY2FtZXJhT24pIHsKICAgICAgICAgIC8v57uT5p2f55qE5pe25YCZ5ouN54Wn5LiK5Lyg5LiA5bygCiAgICAgICAgICB0aGlzLnRha2VQaG90bygpOwogICAgICAgICAgdGhpcy5jbG9zZUNhbWVyYSgpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgICBkYXRhLnF1ZXN0aW9uSWRzID0gW107CiAgICAgICAgZGF0YS51c2VyQW5zd2VycyA9IHRoaXMudXNlckFuc3dlci5qb2luKCctJyk7CiAgICAgICAgdGhpcy5xdWVzdGlvbkluZm8uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIGRhdGEucXVlc3Rpb25JZHMucHVzaChpdGVtLnF1ZXN0aW9uSWQpOyAvL+W9k+WJjeaVsOaNruS4jeWujOaVtCznlKjmiLflm57nrZTkuI3lrozmlbQo5oiR5Lus6Ieq5Yqo6KGl5YWF56m6562U5qGILOmYsuatouS4muWKoeWHuumUmSkKCiAgICAgICAgICBpZiAoaW5kZXggPiBfdGhpczcudXNlckFuc3dlci5sZW5ndGgpIHsKICAgICAgICAgICAgZGF0YS51c2VyQW5zd2VycyArPSAnIC0nOwogICAgICAgICAgfQogICAgICAgIH0pOyAvL+WmguaenOaJgOaciemimOebruWFqOmDqOacquetlAoKICAgICAgICBpZiAoZGF0YS51c2VyQW5zd2VycyA9PT0gJycpIHsKICAgICAgICAgIHRoaXMucXVlc3Rpb25JbmZvLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgZGF0YS51c2VyQW5zd2VycyArPSAnIC0nOwogICAgICAgICAgfSk7CiAgICAgICAgICBkYXRhLnVzZXJBbnN3ZXJzLnNwbGl0KDAsIGRhdGEudXNlckFuc3dlcnMubGVuZ3RoIC0gMSk7CiAgICAgICAgfQoKICAgICAgICBkYXRhLmV4YW1JZCA9IHBhcnNlSW50KHRoaXMuJHJvdXRlLnBhcmFtcy5leGFtSWQpOwogICAgICAgIGRhdGEucXVlc3Rpb25JZHMgPSBkYXRhLnF1ZXN0aW9uSWRzLmpvaW4oJywnKTsKICAgICAgICBkYXRhLmNyZWRpdEltZ1VybCA9IHRoaXMudGFrZVBob3RvVXJsLmpvaW4oJywnKTsKICAgICAgICBleGFtLmFkZEV4YW1SZWNvcmQoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgaWYgKHJlc3AuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIF90aGlzNy4kbm90aWZ5KHsKICAgICAgICAgICAgICB0aXRsZTogJ1RpcHMnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfogIPor5Xml7bpl7Tnu5PmnZ8s5bey5Li65oKo6Ieq5Yqo5o+Q5LqkICpe4pa9XionLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzNy4kcm91dGVyLnB1c2goJy9leGFtUmVzdWx0LycgKyByZXNwLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["name","data","examInfo","questionInfo","questionType","curIndex","bigImgDialog","bigImgUrl","userAnswer","loading","show","optionName","duration","mediaStreamTrack","takePhotoUrl","cameraOn","created","body","lock","text","spinner","window","setTimeout","times","item","mounted","_gap_time","localStorage","_beforeUnload_time","methods","getExamInfo","exam","getQuestionInfo","ids","question","showBigImg","url","checkSingleAnswer","index","selectedMultipleAnswer","String","join","getCamera","video","width","height","audio","promise","catch","message","type","takePhoto","ctx","formData","closeCamera","tracks","track","document","base64ToFile","urlData","fileName","ia","uploadExamToAdmin","reg","flag","confirmButtonText","cancelButtonText","then","title","watch","newVal"],"sourceRoot":"src/views/student","sources":["ExamPage.vue"],"sourcesContent":["<template>\n\n  <el-container v-if=\"show\">\n    <el-header style=\"margin-top: 60px\">\n      <el-row>\n        <el-col :span=\"18\" :offset=\"3\" style=\"border-bottom: 1px solid #f5f5f5\">\n          <span class=\"startExam\">开始考试</span>\n          <span class=\"examTitle\">距离考试结束还有：</span>\n          <span style=\"color: red;font-size: 18px;\">{{ duration | timeFormat }}</span>\n          <el-button type=\"warning\" round\n                     style=\"background-color: #ffd550;float: right;color: black;font-weight: 800\"\n                     @click=\"uploadExamToAdmin\">提交试卷\n          </el-button>\n        </el-col>\n      </el-row>\n    </el-header>\n\n    <el-main>\n      <el-row>\n        <el-col :span=\"18\" :offset=\"3\">\n          <el-col :span=\"16\">\n            <el-card style=\"min-height: 500px\">\n              <!--题目信息-->\n              <div>\n                <i class=\"num\">{{ curIndex + 1 }}</i>\n                <span v-if=\"questionInfo[curIndex].questionType === 1\">【单选题】</span>\n                <span v-else-if=\"questionInfo[curIndex].questionType === 2\">【多选题】</span>\n                <span v-else-if=\"questionInfo[curIndex].questionType === 3\">【判断题】</span>\n                <span v-else>【简答题】</span>\n                <span>{{ questionInfo[curIndex].questionContent }}:</span>\n              </div>\n              <!--题目中的配图-->\n              <img v-for=\"url in questionInfo[curIndex].images\" :src=\"url\" title=\"点击查看大图\" alt=\"题目图片\"\n                   style=\"width: 100px;height: 100px;cursor: pointer\" @click=\"showBigImg(url)\">\n\n              <!--单选 和 判断 的答案列表-->\n              <div style=\"margin-top: 25px\"\n                   v-show=\"questionInfo[curIndex].questionType === 1 || questionInfo[curIndex].questionType === 3\">\n                <div class=\"el-radio-group\">\n                  <label v-for=\"(item,index) in questionInfo[curIndex].answer\"\n                         @click=\"checkSingleAnswer(index)\"\n                         :class=\"index === userAnswer[curIndex] ? 'active' : ''\">\n                    <span>{{ optionName[index] + '、' + item.answer }}</span>\n                    <img style=\"position: absolute;left:100%;top:50%;transform: translateY(-50%);\n                  width: 40px;height: 40px;float: right;cursor: pointer;\" title=\"点击查看大图\"\n                         v-if=\"item.images !== null\"\n                         v-for=\"i2 in item.images\" :src=\"i2\" alt=\"\" @mouseover=\"showBigImg(i2)\">\n                  </label>\n                </div>\n              </div>\n\n              <!--多选的答案列表-->\n              <div style=\"margin-top: 25px\" v-show=\"questionInfo[curIndex].questionType === 2\">\n                <div class=\"el-radio-group\">\n                  <label v-for=\"(item,index) in questionInfo[curIndex].answer\"\n                         @click=\"selectedMultipleAnswer(index)\"\n                         :class=\"(userAnswer[curIndex]+'').indexOf(index+'') !== -1? 'active' : ''\">\n                    <span>{{ optionName[index] + '、' + item.answer }}</span>\n                    <img style=\"position: absolute;left:100%;top:50%;transform: translateY(-50%);\n                  width: 40px;height: 40px;float: right;cursor: pointer;\" title=\"点击查看大图\"\n                         v-if=\"item.images !== null\"\n                         v-for=\"i2 in item.images\" :src=\"i2\" alt=\"\" @mouseover=\"showBigImg(i2)\">\n                  </label>\n                </div>\n              </div>\n\n              <!--简答题的答案-->\n              <div style=\"margin-top: 25px\" v-show=\"questionInfo[curIndex].questionType === 4\">\n                <el-input\n                  type=\"textarea\"\n                  :rows=\"8\"\n                  placeholder=\"请输入答案\"\n                  v-model=\"userAnswer[curIndex]\">\n                </el-input>\n              </div>\n\n              <!--上一题 下一题-->\n              <div style=\"margin-top: 25px\">\n                <el-button type=\"primary\" icon=\"el-icon-back\" :disabled=\"curIndex<1\" @click=\"curIndex--\">上一题</el-button>\n                <el-button type=\"primary\" icon=\"el-icon-right\" :disabled=\"curIndex>=questionInfo.length-1\"\n                           @click=\"curIndex++\">下一题\n                </el-button>\n              </div>\n\n            </el-card>\n          </el-col>\n\n          <el-col :span=\"7\" :offset=\"1\">\n            <!--答题卡卡片-->\n            <el-card>\n              <div>\n                <p style=\"font-size: 18px;\">答题卡</p>\n                <div style=\"margin-top: 25px\">\n                  <span\n                    style=\"background-color: rgb(238,238,238);padding: 5px 10px 5px 10px;margin-left: 15px\">未作答</span>\n                  <span style=\"background-color: rgb(87,148,247);color: white;\n                padding: 5px 10px 5px 10px;margin-left: 15px\">已作答</span>\n                </div>\n              </div>\n\n              <!--单选的答题卡-->\n              <div style=\"margin-top: 25px\">\n                <p style=\"font-size: 18px;\">单选题</p>\n                <el-button style=\"margin-top: 10px;margin-left: 15px\" size=\"mini\"\n                           v-show=\"questionInfo[item-1].questionType === 1\"\n                           :class=\"questionInfo[item-1].questionType === 1 && userAnswer[item-1] !== undefined ?\n                            'done' : userAnswer[item-1] === undefined ? curIndex === (item-1) ? 'orange' : 'noAnswer' : 'noAnswer'\"\n                           v-for=\"item in questionInfo.length\" :key=\"item\" @click=\"curIndex = item-1\">{{ item }}\n                </el-button>\n              </div>\n\n              <!--多选的答题卡-->\n              <div style=\"margin-top: 25px\">\n                <p style=\"font-size: 18px;\">多选题</p>\n                <el-button style=\"margin-top: 10px;margin-left: 15px\" size=\"mini\"\n                           v-show=\"questionInfo[item-1].questionType === 2\"\n                           :class=\"questionInfo[item-1].questionType === 2 && userAnswer[item-1] !== undefined ?\n                            'done' : userAnswer[item-1] === undefined ? curIndex === (item-1) ? 'orange' : 'noAnswer' : 'noAnswer'\"\n                           v-for=\"item in questionInfo.length\" :key=\"item\" @click=\"curIndex = item-1\">{{ item }}\n                </el-button>\n              </div>\n\n              <!--判断的答题卡-->\n              <div style=\"margin-top: 25px\">\n                <p style=\"font-size: 18px;\">判断题</p>\n                <el-button style=\"margin-top: 10px;margin-left: 15px\" size=\"mini\"\n                           v-show=\"questionInfo[item-1].questionType === 3\"\n                           :class=\"questionInfo[item-1].questionType === 3 && userAnswer[item-1] !== undefined ?\n                            'done' : userAnswer[item-1] === undefined ? curIndex === (item-1) ? 'orange' : 'noAnswer' : 'noAnswer'\"\n                           v-for=\"item in questionInfo.length\" :key=\"item\" @click=\"curIndex = item-1\">{{ item }}\n                </el-button>\n              </div>\n\n              <!--简答的答题卡-->\n              <div style=\"margin-top: 25px\">\n                <p style=\"font-size: 18px;\">简答题</p>\n                <el-button style=\"margin-top: 10px;margin-left: 15px\" size=\"mini\"\n                           v-show=\"questionInfo[item-1].questionType === 4\"\n                           :class=\"questionInfo[item-1].questionType === 4 && userAnswer[item-1] !== undefined ?\n                            'done' : userAnswer[item-1] === undefined ? curIndex === (item-1) ? 'orange' : 'noAnswer' : 'noAnswer'\"\n                           v-for=\"item in questionInfo.length\" :key=\"item\" @click=\"curIndex = item-1\">{{ item }}\n                </el-button>\n              </div>\n            </el-card>\n          </el-col>\n\n        </el-col>\n      </el-row>\n      <video id=\"video\" muted=\"muted\" style=\"float:right;position: fixed;top: 80%;left: 85%\" width=\"200px\"\n             height=\"200px\" autoplay=\"autoplay\"></video>\n      <canvas id=\"canvas\" hidden width=\"200px\" height=\"200px\"></canvas>\n    </el-main>\n    <!--图片回显-->\n    <el-dialog :visible.sync=\"bigImgDialog\" @close=\"bigImgDialog = false\">\n      <img style=\"width: 100%\" :src=\"bigImgUrl\">\n    </el-dialog>\n  </el-container>\n\n</template>\n\n<script>\n\nimport exam from '@/api/exam'\nimport question from '@/api/question'\n\nexport default {\n  name: 'ExamPage',\n  data () {\n    return {\n      //当前考试的信息\n      examInfo: {},\n      //当前的考试题目\n      questionInfo: [\n        {\n          questionType: ''\n        }\n      ],\n      //当前题目的索引值\n      curIndex: 0,\n      //控制大图的对话框\n      bigImgDialog: false,\n      //当前要展示的大图的url\n      bigImgUrl: '',\n      //用户选择的答案\n      userAnswer: [],\n      //页面数据加载\n      loading: {},\n      //页面绘制是否开始\n      show: false,\n      //答案的选项名abcd数据\n      optionName: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'],\n      //考试总时长\n      duration: 0,\n      //摄像头对象\n      mediaStreamTrack: null,\n      //诚信照片的url\n      takePhotoUrl: [],\n      //摄像头是否开启\n      cameraOn: false,\n    }\n  },\n  created () {\n    this.getExamInfo()\n    //页面数据加载的等待状态栏\n    this.loading = this.$Loading.service({\n      body: true,\n      lock: true,\n      text: '数据拼命加载中,(*╹▽╹*)',\n      spinner: 'el-icon-loading',\n    })\n    //开启摄像头\n    window.onload = () => {\n      setTimeout(() => {\n        this.getCamera()\n      }, 1000)\n\n      //生成3次时间点截图\n      let times = []\n      for (let i = 0; i < 2; i++) {\n        times.push(Math.ceil(Math.random() * this.duration * 1000))\n      }\n      times.push(10000)\n      //一次考试最多3次随机的诚信截图\n      times.forEach(item => {\n        window.setTimeout(() => {\n          this.takePhoto()\n        }, item)\n      })\n    }\n  },\n  mounted () {\n    //关闭浏览器窗口的时候移除 localstorage的时长\n    var userAgent = navigator.userAgent //取得浏览器的userAgent字符串\n    var isOpera = userAgent.indexOf('Opera') > -1 //判断是否Opera浏览器\n    var isIE = userAgent.indexOf('compatible') > -1 && userAgent.indexOf('MSIE') > -1 && !isOpera //判断是否IE浏览器\n    var isIE11 = userAgent.indexOf('rv:11.0') > -1 //判断是否是IE11浏览器\n    var isEdge = userAgent.indexOf('Edge') > -1 && !isIE //判断是否IE的Edge浏览器\n    if (!isIE && !isEdge && !isIE11) {//兼容chrome和firefox\n      var _beforeUnload_time = 0, _gap_time = 0\n      var is_fireFox = navigator.userAgent.indexOf('Firefox') > -1//是否是火狐浏览器\n      window.onunload = function () {\n        _gap_time = new Date().getTime() - _beforeUnload_time\n        if (_gap_time <= 5) {\n          localStorage.removeItem('examDuration' + this.examInfo.examId)\n        } else {//谷歌浏览器刷新\n        }\n      }\n      window.onbeforeunload = function () {\n        _beforeUnload_time = new Date().getTime()\n        if (is_fireFox) {//火狐关闭执行\n\n        } else {//火狐浏览器刷新\n        }\n      }\n    }\n  },\n  methods: {\n    //查询当前考试的信息\n    getExamInfo () {\n      exam.getExamInfoById(this.$route.params).then((resp) => {\n        if (resp.code === 200) {\n          this.examInfo = resp.data\n          //设置定时(秒)\n          if (localStorage.getItem('examDuration' + this.examInfo.examId) === '0') localStorage.removeItem('examDuration' + this.examInfo.examId)\n          this.duration = localStorage.getItem('examDuration' + this.examInfo.examId) || resp.data.examDuration * 60\n          //考试剩余时间定时器\n          this.timer = window.setInterval(() => {\n            if (this.duration > 0) this.duration--\n          }, 1000)\n          this.getQuestionInfo(resp.data.questionIds.split(','))\n        }\n      })\n    },\n    //查询考试的题目信息\n    async getQuestionInfo (ids) {\n      await ids.forEach((item, index) => {\n        question.getQuestionById(item).then((resp) => {\n          if (index === 0) this.questionInfo = []\n          if (resp.code === 200) {\n            this.questionInfo.push(resp.data)\n            //重置问题的顺序 单选 多选 判断 简答\n            this.questionInfo = this.questionInfo.sort(function (a, b) {\n              return a.questionType - b.questionType\n            })\n          }\n        })\n      })\n      this.loading.close()\n      this.show = true\n    },\n    //点击展示高清大图\n    showBigImg (url) {\n      this.bigImgUrl = url\n      this.bigImgDialog = true\n    },\n    //检验单选题的用户选择的答案\n    checkSingleAnswer (index) {\n      this.$set(this.userAnswer, this.curIndex, index)\n    },\n    //多选题用户的答案选中\n    selectedMultipleAnswer (index) {\n      if (this.userAnswer[this.curIndex] === undefined) {//当前是多选的第一个答案\n        this.$set(this.userAnswer, this.curIndex, index)\n      } else if (String(this.userAnswer[this.curIndex]).split(',').includes(index + '')) {//取消选中\n        let newArr = []\n        String(this.userAnswer[this.curIndex]).split(',').forEach(item => {\n          if (item !== '' + index) newArr.push(item)\n        })\n        if (newArr.length === 0) {\n          this.$set(this.userAnswer, this.curIndex, undefined)\n        } else {\n          this.$set(this.userAnswer, this.curIndex, newArr.join(','))\n          //答案格式化顺序DBAC -> ABCD\n          this.userAnswer[this.curIndex] = String(this.userAnswer[this.curIndex]).split(',').sort(function (a, b) {\n            return a - b\n          }).join(',')\n        }\n      } else if (!((this.userAnswer[this.curIndex] + '').split(',').includes(index + ''))) {//第n个答案\n        this.$set(this.userAnswer, this.curIndex, this.userAnswer[this.curIndex] += ',' + index)\n        //答案格式化顺序DBAC -> ABCD\n        this.userAnswer[this.curIndex] = String(this.userAnswer[this.curIndex]).split(',').sort(function (a, b) {\n          return a - b\n        }).join(',')\n      }\n    },\n    //调用摄像头\n    getCamera () {\n      let constraints = {\n        video: {\n          width: 200,\n          height: 200\n        },\n        audio: false\n      }\n      //获得video摄像头\n      let video = document.getElementById('video')\n      let promise = navigator.mediaDevices.getUserMedia(constraints)\n      promise.then((mediaStream) => {\n        this.mediaStreamTrack = typeof mediaStream.stop === 'function' ? mediaStream : mediaStream.getTracks()[1]\n        video.srcObject = mediaStream\n        video.play()\n        this.cameraOn = true\n      }).catch((back) => {\n        this.$message({\n          duration: 1500,\n          message: '请开启摄像头权限o(╥﹏╥)o!',\n          type: 'error'\n        })\n      })\n    },\n    //拍照\n    takePhoto () {\n      if (this.cameraOn) {//摄像头是否开启 开启了才执行上传信用图片\n        //获得Canvas对象\n        let video = document.getElementById('video')\n        let canvas = document.getElementById('canvas')\n        let ctx = canvas.getContext('2d')\n        ctx.drawImage(video, 0, 0, 200, 200)\n        // toDataURL  ---  可传入'image/png'---默认, 'image/jpeg'\n        let img = document.getElementById('canvas').toDataURL()\n\n        //构造post的form表单\n        let formData = new FormData()\n        //convertBase64UrlToBlob函数是将base64编码转换为Blob\n        formData.append('file', this.base64ToFile(img, 'examTakePhoto.png'))\n        //上传阿里云OSS\n        this.$http.post(this.API.uploadQuestionImage, formData).then((resp) => {\n          if (resp.data.code === 200) this.takePhotoUrl.push(resp.data.data)\n        })\n      }\n    },\n    //关闭摄像头\n    closeCamera () {\n      let stream = document.getElementById('video').srcObject\n      let tracks = stream.getTracks()\n      tracks.forEach(function (track) {\n        track.stop()\n      })\n      document.getElementById('video').srcObject = null\n    },\n    //将摄像头截图的base64串转化为file提交后台\n    base64ToFile (urlData, fileName) {\n      let arr = urlData.split(',')\n      let mime = arr[0].match(/:(.*?);/)[1]\n      let bytes = atob(arr[1]) // 解码base64\n      let n = bytes.length\n      let ia = new Uint8Array(n)\n      while (n--) {\n        ia[n] = bytes.charCodeAt(n)\n      }\n      return new File([ia], fileName, { type: mime })\n    },\n    //上传用户考试信息进入后台\n    async uploadExamToAdmin () {\n      if (this.cameraOn) await this.takePhoto()//结束的时候拍照上传一张\n      // 正则\n      var reg = new RegExp('-', 'g')\n      // 去掉用户输入的非法分割符号(-),保证后端接受数据处理不报错\n      this.userAnswer.forEach((item, index) => {\n        if (this.questionInfo[index].questionType === 4) {//简答题答案处理\n          this.userAnswer[index] = item.replace(reg, ' ')\n        }\n      })\n\n      // 标记题目是否全部做完\n      let flag = true\n      for (let i = 0; i < this.userAnswer.length; i++) {// 检测用户是否题目全部做完\n        if (this.userAnswer[i] === undefined) {\n          flag = false\n        }\n      }\n      // 如果用户所有答案的数组长度小于题目长度,这个时候也要将标志位置为false\n      if (this.userAnswer.length < this.questionInfo.length) {\n        flag = false\n      }\n      //题目未做完\n      if (!flag) {\n        // if (this.userAnswer.some((item) => item === undefined)) {\n        this.$confirm('当前试题暂未做完, 是否继续提交o(╥﹏╥)o ?', 'Tips', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          let data = {}\n          data.questionIds = []\n          data.userAnswers = this.userAnswer.join('-')\n          this.questionInfo.forEach((item, index) => {\n            data.questionIds.push(item.questionId)\n            //当前数据不完整,用户回答不完整(我们自动补充空答案,防止业务出错)\n            if (index > (this.userAnswer.length - 1)) {\n              data.userAnswers += '- '\n            }\n          })\n          //如果所有题目全部未答\n          if (this.userAnswer.length === 0) {\n            this.questionInfo.forEach(item => {\n              data.userAnswers += ' -'\n            })\n            data.userAnswers.split(0, data.userAnswers.length - 1)\n          }\n          data.examId = parseInt(this.$route.params.examId)\n          data.questionIds = data.questionIds.join(',')\n          data.creditImgUrl = this.takePhotoUrl.join(',')\n          exam.addExamRecord(data).then((resp) => {\n            if (resp.code === 200) {\n              this.$notify({\n                title: 'Tips',\n                message: '考试结束 *^▽^*',\n                type: 'success',\n                duration: 2000\n              })\n              this.$router.push('/examResult/' + resp.data)\n            }\n          })\n        }).catch(() => {\n          this.$notify({\n            title: 'Tips',\n            message: '继续加油! *^▽^*',\n            type: 'success',\n            duration: 2000\n          })\n        })\n      } else {//当前题目做完了\n        if (this.cameraOn) {\n          //结束的时候拍照上传一张\n          this.takePhoto()\n          this.closeCamera()\n        }\n        let data = {}\n        data.questionIds = []\n        data.userAnswers = this.userAnswer.join('-')\n        data.examId = parseInt(this.$route.params.examId)\n        data.creditImgUrl = this.takePhotoUrl.join(',')\n        this.questionInfo.forEach((item, index) => {\n          data.questionIds.push(item.questionId)\n        })\n        data.questionIds = data.questionIds.join(',')\n        exam.addExamRecord(data).then((resp) => {\n          if (resp.code === 200) {\n            this.$notify({\n              title: 'Tips',\n              message: '考试结束 *^▽^*',\n              type: 'success',\n              duration: 2000\n            })\n            this.$router.push('/examResult/' + resp.data)\n          }\n        })\n      }\n    }\n  },\n  watch: {\n    //监控考试的剩余时间\n    duration (newVal) {\n      localStorage.setItem('examDuration' + this.examInfo.examId, newVal)\n      //摄像头数据\n      let constraints = {\n        video: {\n          width: 200,\n          height: 200\n        },\n        audio: false\n      }\n      //通过调用摄像头判断用户是否中途关闭摄像头\n      let promise = navigator.mediaDevices.getUserMedia(constraints)\n      promise.catch((back) => {\n        this.cameraOn = false\n      })\n      if (!this.cameraOn) {//如果摄像头未开启,就再次调用开启\n        this.getCamera()\n      }\n      //考试时间结束了提交试卷\n      if (newVal < 1) {\n        if (this.cameraOn) {\n          //结束的时候拍照上传一张\n          this.takePhoto()\n          this.closeCamera()\n        }\n        let data = {}\n        data.questionIds = []\n        data.userAnswers = this.userAnswer.join('-')\n        this.questionInfo.forEach((item, index) => {\n          data.questionIds.push(item.questionId)\n          //当前数据不完整,用户回答不完整(我们自动补充空答案,防止业务出错)\n          if (index > this.userAnswer.length) {\n            data.userAnswers += ' -'\n          }\n        })\n        //如果所有题目全部未答\n        if (data.userAnswers === '') {\n          this.questionInfo.forEach(item => {\n            data.userAnswers += ' -'\n          })\n          data.userAnswers.split(0, data.userAnswers.length - 1)\n        }\n        data.examId = parseInt(this.$route.params.examId)\n\n        data.questionIds = data.questionIds.join(',')\n        data.creditImgUrl = this.takePhotoUrl.join(',')\n        exam.addExamRecord(data).then((resp) => {\n          if (resp.code === 200) {\n            this.$notify({\n              title: 'Tips',\n              message: '考试时间结束,已为您自动提交 *^▽^*',\n              type: 'success',\n              duration: 2000\n            })\n            this.$router.push('/examResult/' + resp.data)\n          }\n        })\n      }\n    },\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../../assets/css/student/examPage\";\n</style>\n"]}]}